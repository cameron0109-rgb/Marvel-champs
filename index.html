<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Marvel Champions Solo - Spider-Man vs Rhino</title>
<style>
body { font-family:sans-serif; background:#111; color:#fff; margin:0; padding:0; display:flex; flex-direction:column; align-items:center; }
h1,h2,h3,h4 { margin:5px; }
#game { width:95%; max-width:700px; display:flex; flex-direction:column; align-items:center; }
.area { border:1px solid #fff; border-radius:6px; margin:8px; padding:8px; background:#222; width:100%; }
.flex { display:flex; flex-wrap:wrap; justify-content:flex-start; }
.card { border:1px solid #fff; border-radius:4px; padding:4px; margin:2px; background:#333; width:140px; }
button { margin:4px; padding:6px 10px; border:none; border-radius:4px; background:#f04; color:#fff; font-weight:bold; }
</style>
</head>
<body>
<h1>Marvel Champions Solo (Spider-Man vs Rhino)</h1>
<div id="game">

  <!-- Hero Area -->
  <div class="area" id="heroArea">
    <h2>Hero: Spider-Man</h2>
    <div>Health: <span id="heroHP">10</span> | Afflictions: <span id="heroAfflictions">None</span></div>
    <h3>Hand:</h3>
    <div id="heroHand" class="flex"></div>
    <div>Deck: <span id="heroDeckCount">0</span> | Discard: <span id="heroDiscardCount">0</span></div>
    <button onclick="heroDrawCard()">Draw Hero Card</button>
  </div>

  <!-- Villain Area -->
  <div class="area" id="villainArea">
    <h2>Villain: Rhino</h2>
    <div>Health: <span id="villainHP">45</span> | Stage: <span id="villainStage">1</span></div>

    <h3>Main Scheme: <span id="mainSchemeName">The Break-In!</span></h3>
    <div id="mainSchemeText">Rhino tries to steal tech from Oscorp.</div>
    <div>Threat: <span id="mainThreat">0</span> / <span id="mainMaxThreat">6</span></div>
    <button onclick="addThreat()">Add Threat</button>

    <h4>Side Schemes: <span id="sideSchemes">None</span></h4>

    <h3>Minions:</h3>
    <div id="minionArea" class="flex"></div>
    <div>Villain Deck: <span id="villainDeckCount">0</span> | Discard: <span id="villainDiscardCount">0</span></div>
    <button onclick="advanceVillainStage()">Advance Stage</button>
    <button onclick="villainDrawCard()">Draw Villain Card</button>
  </div>

</div>

<script>
// --- Hero ---
let heroDeck = [
  {name:"Web-Shooters", cost:1, text:"Attack 2. Gain 1 resource."},
  {name:"Spider-Sense", cost:0, text:"Response: After an enemy attacks you, ready Spider-Man."},
  {name:"Enhanced Reflexes", cost:2, text:"Evade an enemy."},
  {name:"Unflappable", cost:1, text:"Reduce 1 damage from an attack."},
  {name:"Desperate Defense", cost:3, text:"Cancel 1 attack targeting an ally."}
];
let heroDiscard = [];
let heroHand = [];
let heroHP = 10;
let heroAfflictions = [];

// --- Main Scheme ---
let mainScheme = { 
  name:"The Break-In!", 
  text:"Rhino tries to steal tech from Oscorp.", 
  threat:0, 
  maxThreat:6
};

// --- Villain ---
let villainDeck = [
  {name:"Rhino Charge", type:"attack", effect:()=>{heroHP -=3; renderHeroHand(); alert("Rhino attacks: 3 damage!");}},
  {name:"Spawn Minion", type:"minion", effect:()=>{spawnMinion(); alert("A minion appears!");}},
  {name:"Add Threat", type:"threat", effect:()=>{addThreat(); alert("Threat added!");}}
];
let villainDiscard = [];
let villain = {hp:45, stage:1, minions:[], threat:0};

// --- DOM ---
const heroHandDiv = document.getElementById('heroHand');
const heroDeckCount = document.getElementById('heroDeckCount');
const heroDiscardCount = document.getElementById('heroDiscardCount');
const heroHPSpan = document.getElementById('heroHP');
const heroAffSpan = document.getElementById('heroAfflictions');

const villainHPSpan = document.getElementById('villainHP');
const villainStageSpan = document.getElementById('villainStage');
const mainSchemeNameSpan = document.getElementById('mainSchemeName');
const mainSchemeTextDiv = document.getElementById('mainSchemeText');
const mainThreatSpan = document.getElementById('mainThreat');
const mainMaxThreatSpan = document.getElementById('mainMaxThreat');
const minionAreaDiv = document.getElementById('minionArea');
const villainDeckCountSpan = document.getElementById('villainDeckCount');
const villainDiscardCountSpan = document.getElementById('villainDiscardCount');

// --- Functions ---
function shuffle(array){ for(let i=array.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [array[i],array[j]]=[array[j],array[i]]; } }

// Hero functions
function heroDrawCard(){
  if(heroDeck.length===0){ alert("Hero deck empty!"); return; }
  let card = heroDeck.pop();
  heroHand.push(card);
  renderHeroHand();
}
function renderHeroHand(){
  heroHandDiv.innerHTML="";
  heroHand.forEach(c=>{
    let div=document.createElement("div");
    div.className="card";
    div.innerHTML=`<b>${c.name} (Cost: ${c.cost})</b><br>${c.text}`;
    heroHandDiv.appendChild(div);
  });
  heroDeckCount.innerText=heroDeck.length;
  heroDiscardCount.innerText=heroDiscard.length;
  heroHPSpan.innerText=heroHP;
  heroAffSpan.innerText=heroAfflictions.length? heroAfflictions.join(", ") : "None";
}

// Villain functions
function villainDrawCard(){
  if(villainDeck.length===0){ alert("Villain deck empty!"); return; }
  let card = villainDeck.pop();
  villainDiscard.push(card);
  card.effect();
  alert(`Villain drew: ${card.name}`);
  renderVillain();
}

function advanceVillainStage(){ villain.stage++; villainStageSpan.innerText=villain.stage; }
function spawnMinion(){ let m={hp:5}; villain.minions.push(m); renderMinions(); }
function renderMinions(){
  minionAreaDiv.innerHTML="";
  villain.minions.forEach((m,i)=>{
    let div=document.createElement("div");
    div.className="card";
    div.innerHTML=`Minion ${i+1}<br>HP: ${m.hp}`;
    minionAreaDiv.appendChild(div);
  });
}

function addThreat(){ 
  if(mainScheme.threat < mainScheme.maxThreat){ 
    mainScheme.threat++; 
    mainThreatSpan.innerText = mainScheme.threat; 
  }
}

function renderVillain(){
  villainHPSpan.innerText=villain.hp;
  villainStageSpan.innerText=villain.stage;
  mainSchemeNameSpan.innerText = mainScheme.name;
  mainSchemeTextDiv.innerText = mainScheme.text;
  mainThreatSpan.innerText = mainScheme.threat;
  mainMaxThreatSpan.innerText = mainScheme.maxThreat;
  villainDeckCountSpan.innerText = villainDeck.length;
  villainDiscardCountSpan.innerText = villainDiscard.length;
  renderMinions();
}

// --- Init ---
shuffle(heroDeck);
shuffle(villainDeck);
renderHeroHand();
renderVillain();
</script>
</body>
</html>
